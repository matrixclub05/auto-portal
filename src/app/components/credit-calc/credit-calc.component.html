<div class="modal-header" *ngIf="_modalRef">
  <button aria-label="Close" class="close" type="button" (click)="_modalRef.close()">
    <span aria-hidden="true">×</span>
  </button>
</div>

<div [ngClass]="{'modal-body': _modalRef}">

  <div class="row top-bar">
    <div class="col-sm-4">
    </div>
    <div class="col-sm-8">
      <div class="sub-breadcrumbs">
        <h2>Кредитный калькулятор</h2>
      </div>
    </div>
  </div>

  <div class="jumbotron">
    <div class="row" *ngIf="_car">
      <app-market-car [_car]="_car"  [_showCalcLink]="false"  class="col-xs-12"></app-market-car>
    </div>

    <div class="row">
      <form class="form-horizontal ng-pristine ng-valid" >

        <div class="form-group">
          <label for="sum" class="col-md-3 control-label">Сумма кредита :</label>

          <div class="col-md-2">
            <input type="text" class="form-control ng-pristine ng-valid ng-touched" id="sum" name="sumCredit" [(ngModel)]="sumCredit">
          </div>

          <span class="help-block error ng-binding"></span>
        </div>

        <div class="form-group">
          <label for="date" class="col-md-3 control-label">Срок кредита ( в месяцах ):</label>

          <div class="col-md-2">
            <input type="text" class="form-control ng-pristine ng-untouched ng-valid" id="date" name="timeCredit" [(ngModel)]="timeCredit">
          </div>

          <span class="help-block error ng-binding"></span>
        </div>

        <div class="form-group">
          <label for="percents" class="col-md-3 control-label">Процентная ставка:</label>

          <div class="col-md-2">
            <input type="text" class="form-control ng-pristine ng-untouched ng-valid" id="percents" name="percentRateCredit" [(ngModel)]="percentRateCredit">
          </div>

          <span class="help-block error ng-binding"></span>
        </div>

        <div class="form-group">
          <div class="col-md-10">
            <button type="button" class="btn btn-sm btn-success" (click)="action()" >Рассчитать</button>
          </div>
        </div>

      </form>
    </div>

    <div class="row">
      <table id="res" class="table table-striped table-bordered">
        <thead>
        <tr>
          <th>№ Платежа</th>
          <th>Задолжность по кредиту </th>
          <th>Начисленные проценты </th>
          <th>Основной долг </th>
          <th>Сумма платежа </th>
        </tr>
        </thead>
        <tbody>

        <tr *ngFor="let item of results; let i = index">
          <td>{{i + 1}}</td>
          <td>{{item.zadoljnost}}</td>
          <td>{{item.na4islProcenti}}</td>
          <td>{{item.osnovnoiDolg}}</td>
          <td>{{item.sumPlatej}}</td>
        </tr>
        <tr class="info" >
          <td colspan="2"><b>Итого:</b></td>
          <td>{{sumNa4islProcenti.toLocaleString()}}</td>
          <td>{{sumSumCredit.toLocaleString()}}</td>
          <td>{{sumSumPlatej.toLocaleString()}}</td>
        </tr>

        </tbody>
      </table>
    </div>

  </div>
</div>

<div class="modal-footer" *ngIf="_modalRef">
  <button type="button" class="btn btn-secondary" (click)="_modalRef.close()">Закрыть</button>
</div>
